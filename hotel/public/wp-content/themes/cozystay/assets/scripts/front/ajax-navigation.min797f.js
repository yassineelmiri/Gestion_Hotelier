!function(l){function c(a,t){a&&a.more?cozystayAjaxNavigation.data.query.paged++:t.hasClass("infinite")?(t.find(".load-more-btn.ajax").remove(),t.removeClass("infinite").append(l("<span>",{class:"no-more-posts-message",text:t.data("no-post-text")?t.data("no-post-text"):cozystayAjaxNavigation.noMoreText}))):(t.find(".load-more-btn.ajax.manual").remove(),t.append(l("<span>",{class:"no-more-posts-message",text:t.data("no-post-text")?t.data("no-post-text"):cozystayAjaxNavigation.noMoreText}))),t.data("loading",!1).removeClass("loading")}var a;cozystayAjaxNavigation&&((a=l(document)).on("cozystayAjaxNavigationProcessData",function(a,t){var o,n,e,s,i,r,d=t.target.closest(".navigation.pagination").siblings(".posts-wrapper").parent();d.length&&d.hasClass("posts")&&l(t.data.items).length&&(e=(n=(o=l("<div>").append(t.data.items)).find(".image-gallery, .cs-room-item .thumbnail-gallery")).length,s=l.fn.loftoceanImageLoading,o.children().addClass("new-post-item post").css("opacity",0),d.hasClass("layout-masonry")?(i=d.data("post-list")?d.data("post-list"):[],r=d.find(".masonry-column"),o.children().each(function(){i.unshift(l(this))}),d.data("post-list",i),d.data("mobile-mode")?r.first().append(o.children()):(r.first().append(o.children()),d.cozystayMasonry({post:".post.new-post-item",append:!0}),e&&n.cozystayPostsGallery()),l(document).trigger("loftcean/moreContent/loaded"),d.find(".new-post-item").removeClass("new-post-item").fadeTo(300,1)):(d.find(".posts-wrapper").append(o.children()),l(document).trigger("loftcean/moreContent/loaded",{videos:!(!t.data.videos||!Array.isArray(t.data.videos))&&t.data.videos}),d.find(".new-post-item").removeClass("new-post-item").fadeTo(300,1),e&&n.cozystayPostsGallery(),l(document).trigger("changed.cozystay.mainContent")),c(t.data,t.target),s&&d.loftoceanImageLoading())}),l("body").on("cozystayAjaxNavigationStart",".pagination-container.load-more",function(a){a.preventDefault();var t=l(this),o=t.parents(".posts");if(t.data("loading"))return!1;t.data("loading",!0).addClass("loading");a=!1;o.length&&o.first().attr("data-settings")?(o=o.first(),(a=JSON.parse(o.attr("data-settings"))).query.paged+=1,o.attr("data-settings",JSON.stringify(a)),a.action=cozystayAjaxNavigation.data.action):a=cozystayAjaxNavigation.data,l.post(cozystayAjaxNavigation.url,a).done(function(a){a.success?l(document).trigger("cozystayAjaxNavigationProcessData",{data:a.data,target:t}):t.data("loading",!1).removeClass("loading")}).fail(function(){t.data("loading",!1).removeClass("loading")})}).on("click",".load-more-btn.ajax.manual",function(a){a.preventDefault(),l(this).closest(".pagination-container.load-more").trigger("cozystayAjaxNavigationStart")}),a.data("previousTop",cozystayParseInt(l(window).scrollTop())),a.on("scrolling.cozystay.window",function(a){var t,o=l(this),n=cozystayParseInt(l(window).scrollTop()),e=l(".pagination-container.load-more.infinite");e.length&&o.data("previousTop")&&o.data("previousTop")<n&&(t=cozystayParseInt(n)+cozystayParseInt(l(window).height()),e.each(function(){var a=l(this).closest(".navigation.pagination").offset().top;if(n<a&&a<t)return l(this).trigger("cozystayAjaxNavigationStart"),!1})),o.data("previousTop",n)}))}(jQuery);
